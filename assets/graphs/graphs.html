<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 	<head>
    	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    	<title>Graphs</title>
    	<script language="javascript" type="text/javascript" src="./jquery.js"></script>
    	<script language="javascript" type="text/javascript" src="./jquery.flot.js"></script>
    	<script language="javascript" type="text/javascript" src="./jquery.flot.time.js"></script>
    	<script language="javascript" type="text/javascript" src="./jquery.flot.navigate.js"></script>
    	<style type="text/css">
    
        	html, body {
	        	height: 100%;
	    	}
    
    	</style>
    	<script type="text/javascript">

		var aData = [];
		var vsData = [];
		var plot;
	
		$(function () {
	
			drawGraphs();
			
			$("<div class='button' style='right:20px;top:20px'>zoom out</div>")
			.appendTo($("#choise"))
			.click(function (event) {
				event.preventDefault();
				plot.zoomOut();
			});
			
			function addArrow(dir, offset) {
			$("<button class='button'>" + dir + "</button>")
				.appendTo($("#choise"))
				.click(function (e) {
					e.preventDefault();
					plot.pan(offset);
				});
		}

		addArrow("left", { left: -10 });
		addArrow("right", { left: 10 });
		addArrow("up", { top: -10 });
		addArrow("down", { top: 10 });
		});
		
		// Remove the second item from the array
		// array.remove(1);
		// Remove the second-to-last item from the array
		// array.remove(-2);
		// Remove the second and third items from the array
		// array.remove(1,2);
		// Remove the last and second-to-last items from the array
		// array.remove(-2,-1);
		
		Array.prototype.remove = function(from, to) {
  			
  			var rest = this.slice((to || from) + 1 || this.length);
  			this.length = from < 0 ? this.length + from : from;
  			
  			return this.push.apply(this, rest);
		};
		
		function drawGraphs() {
		
			var data = [];
		
			data = [ { data: aData, label: "Altitude", lines: { show: true, lineWidth: 2 }, shadowSize: 0 },
					{ data: vsData, label: "Vertical speed", yaxis: 2, lines: { show: true, lineWidth: 2 }, shadowSize: 0 } ];
		
			if(!$("#cbVerticalSpeed").is(":checked")) {
			
				data.remove(1);
			}
		
			plot = $.plot("#placeholder",  data, 
			{
				legend: { position: "nw" },
				xaxes: [ { min: 0, tickDecimals: 0, zoomRange: [1, 10], panRange: [0, null] } ],
				yaxes: [ { min: 0, tickDecimals: 0, zoomRange: [1, 10], panRange: [0, null] }, 
						{ min: 0, tickDecimals: 0, position: "right", zoomRange: [1, 10], panRange: [0, null] } ],
				colors: [ "#FF0000", "#0099FF" ], 
				zoom: { interactive: false },
				pan: { interactive: false }
			});
		}

		
		function setGraphsData(altitudeData, verticalSpeedData) {
		
			aData = altitudeData;
			vsData = verticalSpeedData;
	
			drawGraphs();
		}
		
		</script>
	</head>
    <body>
    	<p id="choise">
    		<input type="checkbox" name="verticalSpeed" checked="true" id="cbVerticalSpeed"></input>
    		<label for="cbVerticalSpeed">Vertical Speed</label>
    	</p>
    	
    	<div id="placeholder" style="width:100%;height:80%;"></div>
	</body>
</html>